# Wordle game schemas

GameStatus:
  type: string
  enum: [NOT_STARTED, IN_PROGRESS, WON, LOST]
  description: |
    - NOT_STARTED: game hasn't started yet
    - IN_PROGRESS: game is ongoing
    - WON: game was won
    - LOST: game was lost (6 attempts used)

AttemptInfo:
  type: object
  properties:
    guess:
      type: string
      minLength: 5
      maxLength: 5
      description: The guessed word
      example: "HELLO"
    feedback:
      type: string
      minLength: 5
      maxLength: 5
      description: |
        Feedback string where each character represents:
        - C: correct (letter in correct position)
        - P: present (letter in word but wrong position)
        - A: absent (letter not in word)
      example: "CPPAA"
  required:
    - guess
    - feedback

AttemptRequest:
  type: object
  properties:
    guess:
      type: string
      minLength: 5
      maxLength: 5
      description: The word to attempt
      example: "HELLO"
  required:
    - guess

AttemptResponse:
  type: object
  properties:
    guess:
      type: string
      minLength: 5
      maxLength: 5
      description: The word that was attempted
      example: "HELLO"
    feedback:
      type: string
      minLength: 5
      maxLength: 5
      description: |
        Feedback string where each character represents:
        - C: correct (letter in correct position)
        - P: present (letter in word but wrong position)
        - A: absent (letter not in word)
      example: "CPPAA"
    attemptNumber:
      type: integer
      minimum: 1
      maximum: 6
      description: The attempt number (1-6)
      example: 1
    status:
      $ref: '#/GameStatus'
      description: Updated game status after this attempt
  required:
    - guess
    - feedback
    - attemptNumber
    - status

GameStateResponse:
  type: object
  properties:
    status:
      $ref: '#/GameStatus'
      description: Current game status
    attemptsCount:
      type: integer
      minimum: 0
      maximum: 6
      description: Number of attempts made
      example: 2
    attempts:
      type: array
      items:
        $ref: '#/AttemptInfo'
      description: List of previous attempts
    maxAttempts:
      type: integer
      description: Maximum number of attempts allowed
      example: 6
  required:
    - status
    - attemptsCount
    - attempts
    - maxAttempts

LeaderboardEntry:
  type: object
  properties:
    username:
      type: string
      example: "player123"
    attempts:
      type: integer
      minimum: 1
      maximum: 6
      description: Number of attempts used to solve
      example: 3
    solveTimeSeconds:
      type: integer
      minimum: 0
      description: Time taken to solve in seconds
      example: 45
    rank:
      type: integer
      minimum: 1
      description: Rank in the leaderboard
      example: 1
  required:
    - username
    - attempts
    - solveTimeSeconds
    - rank

LeaderboardResponse:
  type: object
  properties:
    entries:
      type: array
      items:
        $ref: '#/LeaderboardEntry'
      description: Top players in the leaderboard
    currentUserRank:
      type: integer
      minimum: 1
      description: Current user's rank (only if authenticated)
  required:
    - entries

SaveGameStateRequest:
  type: object
  properties:
    attempts:
      type: array
      items:
        $ref: '#/AttemptInfo'
      description: All attempts made so far
  required:
    - attempts
